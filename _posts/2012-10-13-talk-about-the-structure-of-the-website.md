---
layout: blog
title: 谈谈网站构架
tags: 
published: false
categories: 
summary: 
---
# 前言
更快更流畅的网页加载速度是我们所需要去做的，但是如何去做到呢？特别是对于首页这样非常重要的页面来说，就尤为重要了。

作为前端，很多人的争论点就在于脚本是放到页面下面好还是放到初始化时好呢：？

本文着重点放在页面的CSS和JS上，以及如何去做。
# 一个例子
我们来看看美团是怎么做的：

美团是一次性把网站的绝大部分CSS放入一个base.css然后加载进来。（PS：这是一个非常庞大的CSS，并且放到页面的头部。）

我们忽略其中的跟踪统计代码

然后把JS放到了页面的最底下。页面最低下有一个combo文件，一次性加载整站通用的JS文件，就是核心文件，主要是JS类库和网站自己的通用JS脚本。

之后是yui的一些个依赖关系表（这是为了方便yui的load机制很方便的去查找所需要的js）

最后是真正这个页面的执行脚本

这样的话，如果你第一次去访问美团页面的话，如果网速不够给力的话是需要好一段时间才能让网站的实际脚本生效的。

# 我的构想
这里我谈谈我的一种构想。
## CSS方面
大部分网站用户仅仅可能只是浏览其中几个页面，所以我们的核心css就应该主要集中在这几个页面，而不是涵盖方方面面。

不说别的，大的CSS文件，一是影响网页的加载速度，二是影响网页的渲染速度。这两点对于浏览速度都是非常重要的。

所以针对CSS方面应该是抽出一个核心CSS只放常用的几个页面，这个页面的数量应该是小于3的，就是要么只放首页，要么只放首页和另一个页面，比如说详细页面。

然后其他主流程页面拆分到一个CSS里，非主流程页面再拆分成另外一个CSS文件。

上面是对CSS的理解，下面要说的JS的理解。
## JS部分
目前像美团现在的核心JS异常的庞大，这里说的庞大是排除JS基础类库后的依旧很大。

这里面的很多东西都不应该放到这个通用库的，放到里面而不怎么用，几乎就可以放弃不用了，也是一个资源的浪费，不是吗？

对于外部引用JS尽量保持在2个左右，
比如，一个是核心JS，一个是当前页面所需要使用的JS，这个是最好的。

一般我们要做到这个就需要依赖于combo模式了，就是相当你使用form表单提交一系列数据给服务器，服务器根据你发送的数据组装好然后传给服务器。

当然我个人认为把核心的JS放到HEAD里，引用的JS放到页面底部，这样不至于很慢才加载完JS。
# 总结
## 对于CSS
CSS拆分出一个核心部分，只包含首页或再包含另一个比较重要的页面。
## 对应JS
提出一个基础JS，存放基本类库和一些通用的方法。放到head里。

总体来说美团现在的做法是非常可取的，只是还不尽完美。
